<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2563eb">
  <meta name="description" content="å°ˆç‚ºå¤–ç±çœ‹è­·è¨­è¨ˆçš„å¤šèªè¨€åŸ¹è¨“èˆ‡å·¥ä½œç®¡ç†ç³»çµ±">
  <link rel="manifest" href="./manifest.json">
  <link rel="apple-touch-icon" href="./images/icons/icon-192x192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="./images/icons/icon-192x192.png">
  <title>å¤–ç±çœ‹è­·åŸ¹è¨“åŠ©æ‰‹ | Caregiver Training Assistant</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Noto Sans TC', 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #1f2937;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      min-height: 100vh;
    }

    .header {
      background: white;
      padding: 1rem 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 200;
    }

    .header h1 { color: #2563eb; font-size: 1.4rem; }

    .lang-select {
      padding: 0.4rem 0.8rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 0.85rem;
      background: white;
    }

    .tabs {
      display: flex;
      background: white;
      border-bottom: 2px solid #e5e7eb;
      position: sticky;
      top: 60px;
      z-index: 199;
    }

    .tab {
      flex: 1;
      padding: 0.85rem 0.5rem;
      border: none;
      background: transparent;
      cursor: pointer;
      text-align: center;
      font-size: 0.85rem;
      transition: all 0.2s;
      border-bottom: 3px solid transparent;
      color: #6b7280;
    }

    .tab.active {
      color: #2563eb;
      border-bottom-color: #2563eb;
      font-weight: 700;
      background: #f0f7ff;
    }

    .content { padding: 1.5rem; padding-bottom: 4rem; }

    .section { display: none; }
    .section.active { display: block; animation: fadeIn 0.3s ease; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ===== BUTTONS ===== */
    .btn {
      padding: 0.7rem 1.4rem;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn:hover { background: #1e40af; transform: translateY(-1px); }
    .btn:disabled { background: #9ca3af; cursor: not-allowed; transform: none; }
    .btn-gray { background: #6b7280; }
    .btn-gray:hover { background: #4b5563; }
    .btn-green { background: #10b981; }
    .btn-green:hover { background: #059669; }

    /* ===== SCHEDULE ===== */
    .period-section {
      background: #f9fafb;
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 1rem;
      border: 2px solid #e5e7eb;
    }
    .period-title {
      color: #2563eb;
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .task-item {
      background: white;
      padding: 0.9rem 1rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      display: flex;
      gap: 0.75rem;
      align-items: center;
      border: 2px solid #e5e7eb;
      transition: all 0.2s;
    }
    .task-item:hover { border-color: #93c5fd; }
    .task-item input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
    .task-name {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }
    .task-zh {
      font-size: 0.95rem;
      font-weight: 600;
      color: #1f2937;
    }
    .task-id {
      font-size: 0.8rem;
      color: #2563eb;
      font-style: italic;
    }
    .task-time { color: #6b7280; font-size: 0.85rem; font-weight: 600; white-space: nowrap; }
    .task-delete {
      background: none;
      border: none;
      color: #d1d5db;
      font-size: 1.1rem;
      cursor: pointer;
      padding: 0.2rem 0.4rem;
      border-radius: 6px;
      transition: all 0.2s;
      flex-shrink: 0;
    }
    .task-delete:hover { color: #ef4444; background: #fef2f2; }
    .pending-translate {
      color: #f59e0b !important;
      animation: blink 1s infinite;
    }
    @keyframes blink { 0%,100%{ opacity:1 } 50%{ opacity:0.4 } }

    /* ===== TRANSLATE ===== */
    .translate-box {
      background: #f9fafb;
      border-radius: 12px;
      padding: 1.25rem;
      margin: 0.75rem 0;
      border: 2px solid #e5e7eb;
    }
    .translate-box label { display: block; font-weight: 600; margin-bottom: 0.5rem; }
    select {
      width: 100%;
      padding: 0.65rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 0.95rem;
      background: white;
      margin-bottom: 0.75rem;
    }
    textarea {
      width: 100%;
      padding: 0.9rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
      resize: vertical;
      min-height: 110px;
    }
    textarea:focus, select:focus { outline: none; border-color: #2563eb; }
    textarea[readonly] { background: #f9fafb; }
    .phrase-btn {
      width: 100%;
      margin: 0.4rem 0;
      padding: 0.9rem 1rem;
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s;
    }
    .phrase-btn:hover { border-color: #2563eb; background: #eff6ff; transform: translateX(4px); }

    /* ===== TRAINING GRID ===== */
    .training-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .training-card {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 14px;
      padding: 1.25rem 0.75rem;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      position: relative;
    }
    .training-card:hover {
      border-color: #2563eb;
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(37,99,235,0.15);
    }
    .training-card.completed {
      border-color: #10b981;
      background: #f0fdf4;
    }
    .training-card .card-icon { font-size: 3rem; margin-bottom: 0.75rem; }
    .training-card h3 { font-size: 0.95rem; font-weight: 700; margin-bottom: 0.25rem; color: #1f2937; }
    .training-card p { font-size: 0.75rem; color: #6b7280; }
    .completed-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      background: #10b981;
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      display: none;
    }
    .training-card.completed .completed-badge { display: flex; }

    /* ===== MODAL ===== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
      animation: fadeIn 0.2s;
    }
    .modal-overlay.open { display: flex; align-items: flex-end; }

    @media (min-width: 768px) {
      .modal-overlay.open { align-items: center; justify-content: center; }
    }

    .modal {
      background: white;
      width: 100%;
      max-width: 680px;
      max-height: 90vh;
      border-radius: 20px 20px 0 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      animation: slideUp 0.3s ease;
    }

    @media (min-width: 768px) {
      .modal { border-radius: 20px; }
    }

    @keyframes slideUp {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }

    .modal-header {
      padding: 1.25rem 1.5rem;
      background: linear-gradient(135deg, #2563eb, #7c3aed);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
    }
    .modal-header h2 { font-size: 1.25rem; }
    .modal-close {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    .modal-close:hover { background: rgba(255,255,255,0.35); }

    .modal-body {
      overflow-y: auto;
      padding: 1.5rem;
      flex: 1;
    }

    .modal-footer {
      padding: 1rem 1.5rem;
      border-top: 2px solid #e5e7eb;
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      flex-shrink: 0;
    }

    /* ===== TRAINING CONTENT ===== */
    .lesson-intro {
      background: #eff6ff;
      border-left: 4px solid #2563eb;
      border-radius: 0 8px 8px 0;
      padding: 1rem;
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
      color: #1e3a8a;
    }

    .step-list { display: flex; flex-direction: column; gap: 1rem; }

    .step-item {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
      background: #f9fafb;
      border-radius: 10px;
      padding: 1rem;
      border: 2px solid #e5e7eb;
      transition: all 0.2s;
      cursor: pointer;
    }
    .step-item.done {
      background: #f0fdf4;
      border-color: #10b981;
    }
    .step-item.done .step-text { text-decoration: line-through; color: #6b7280; }

    .step-number {
      background: #2563eb;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      flex-shrink: 0;
      transition: background 0.2s;
    }
    .step-item.done .step-number { background: #10b981; }

    .step-content { flex: 1; }
    .step-text { font-weight: 600; color: #1f2937; margin-bottom: 0.25rem; }
    .step-sub { font-size: 0.875rem; color: #6b7280; font-style: italic; }

    .bilingual-tag {
      display: inline-block;
      background: #dbeafe;
      color: #1e40af;
      font-size: 0.75rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      margin-top: 0.4rem;
      font-weight: 600;
    }

    .warning-box {
      background: #fef3c7;
      border: 2px solid #f59e0b;
      border-radius: 8px;
      padding: 0.9rem 1rem;
      margin: 1rem 0;
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
      font-size: 0.9rem;
      color: #92400e;
    }

    .tip-box {
      background: #d1fae5;
      border: 2px solid #10b981;
      border-radius: 8px;
      padding: 0.9rem 1rem;
      margin: 1rem 0;
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
      font-size: 0.9rem;
      color: #065f46;
    }

    .progress-bar-wrap {
      background: #e5e7eb;
      border-radius: 999px;
      height: 8px;
      margin: 0.5rem 0 1.5rem;
      overflow: hidden;
    }
    .progress-bar {
      background: linear-gradient(90deg, #2563eb, #7c3aed);
      height: 100%;
      border-radius: 999px;
      transition: width 0.4s ease;
    }

    .section-divider {
      border: none;
      border-top: 2px dashed #e5e7eb;
      margin: 1.25rem 0;
    }

    .vocab-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.6rem;
      margin-top: 0.75rem;
    }
    .vocab-item {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 0.65rem 0.75rem;
    }
    .vocab-zh { font-weight: 700; font-size: 0.9rem; color: #1f2937; }
    .vocab-id { font-size: 0.8rem; color: #2563eb; margin-top: 0.1rem; }

    /* ===== EMERGENCY ===== */
    .emergency-banner {
      background: #fef2f2;
      border: 2px solid #ef4444;
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
      display: flex;
      gap: 1rem;
      align-items: center;
      color: #991b1b;
      font-weight: 700;
    }
    .emergency-card {
      background: #f9fafb;
      border-radius: 12px;
      padding: 1.25rem;
      margin: 1rem 0;
      border: 2px solid #e5e7eb;
    }
    .emergency-title {
      color: #ef4444;
      font-size: 1.15rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    .emergency-steps { padding-left: 1.5rem; }
    .emergency-steps li { margin-bottom: 0.6rem; line-height: 1.6; }

    /* ===== ALERTS ===== */
    .alert { padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid; display: flex; gap: 0.75rem; }
    .alert-blue { background: #eff6ff; border-color: #2563eb; color: #1e3a8a; }
    .alert-yellow { background: #fef3c7; border-color: #f59e0b; color: #92400e; }
    .alert-green { background: #d1fae5; border-color: #10b981; color: #065f46; }

    /* ===== PROGRESS OVERVIEW ===== */
    .progress-overview {
      background: linear-gradient(135deg, #2563eb, #7c3aed);
      border-radius: 12px;
      padding: 1.25rem;
      color: white;
      margin-bottom: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .progress-overview h3 { font-size: 1rem; margin-bottom: 0.25rem; opacity: 0.9; }
    .progress-count { font-size: 2rem; font-weight: 800; }

    @media (max-width: 768px) {
      .training-grid { grid-template-columns: repeat(2, 1fr); }
      .vocab-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
<div class="container">
  <!-- Header -->
  <header class="header">
    <h1>ğŸ‘¨â€âš•ï¸ çœ‹è­·åŠ©æ‰‹</h1>
    <select id="lang-select" class="lang-select">
      <option value="zh-TW">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
      <option value="id" selected>ğŸ‡®ğŸ‡© Bahasa Indonesia</option>
      <option value="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
      <option value="th">ğŸ‡¹ğŸ‡­ à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</option>
      <option value="tl">ğŸ‡µğŸ‡­ Filipino</option>
      <option value="en">ğŸ‡¬ğŸ‡§ English</option>
    </select>
  </header>

  <!-- Tabs -->
  <nav class="tabs">
    <button class="tab active" onclick="showTab('schedule',this)">ğŸ“… æ’ç¨‹</button>
    <button class="tab" onclick="showTab('med-reminder',this)">ğŸ’Š ç”¨è—¥</button>
    <button class="tab" onclick="showTab('translate',this)">ğŸŒ ç¿»è­¯</button>
    <button class="tab" onclick="showTab('training',this)">ğŸ“š èª²ç¨‹</button>
    <button class="tab" onclick="showTab('emergency',this)">ğŸš¨ ç·Šæ€¥</button>
  </nav>

  <main class="content">

    <!-- ========== å·¥ä½œæ’ç¨‹ ========== -->
    <section id="schedule" class="section active">
      <h2 style="margin-bottom:1.5rem">æ¯æ—¥å·¥ä½œæ’ç¨‹ Daily Schedule</h2>

      <div class="period-section">
        <div class="period-title">ğŸŒ… æ—©ä¸Š Pagi <span style="font-size:0.85rem;font-weight:400;color:#6b7280">(06:00â€“12:00)</span></div>
        <div id="morning-tasks">
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">å”åŠ©èµ·åºŠèˆ‡ç›¥æ´—</span><span class="task-id">Bantu bangun tidur dan cuci muka</span></span><span class="task-time">07:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">æº–å‚™æ—©é¤èˆ‡é¤µé£Ÿ</span><span class="task-id">Siapkan sarapan dan bantu makan</span></span><span class="task-time">08:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">æ¸¬é‡ç”Ÿç†æŒ‡æ¨™ï¼ˆè¡€å£“ã€è¡€ç³–ï¼‰</span><span class="task-id">Ukur tanda vital (tensi, gula darah)</span></span><span class="task-time">09:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">å”åŠ©æœè—¥</span><span class="task-id">Bantu minum obat</span></span><span class="task-time">10:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
        </div>
      </div>

      <div class="period-section">
        <div class="period-title">â˜€ï¸ ä¸‹åˆ Siang <span style="font-size:0.85rem;font-weight:400;color:#6b7280">(12:00â€“18:00)</span></div>
        <div id="afternoon-tasks">
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">æº–å‚™åˆé¤èˆ‡é¤µé£Ÿ</span><span class="task-id">Siapkan makan siang dan bantu makan</span></span><span class="task-time">12:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">å”åŠ©åˆä¼‘ï¼ˆç¿»èº«ï¼‰</span><span class="task-id">Bantu tidur siang (balik badan)</span></span><span class="task-time">14:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">ç°¡æ˜“å¾©å¥æ´»å‹•</span><span class="task-id">Latihan rehabilitasi ringan</span></span><span class="task-time">16:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">è£œå……æ°´åˆ†</span><span class="task-id">Berikan minum air</span></span><span class="task-time">17:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
        </div>
      </div>

      <div class="period-section">
        <div class="period-title">ğŸŒ™ æ™šä¸Š Malam <span style="font-size:0.85rem;font-weight:400;color:#6b7280">(18:00â€“06:00)</span></div>
        <div id="evening-tasks">
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">æº–å‚™æ™šé¤èˆ‡é¤µé£Ÿ</span><span class="task-id">Siapkan makan malam dan bantu makan</span></span><span class="task-time">18:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">å”åŠ©æœæ™šé–“è—¥ç‰©</span><span class="task-id">Bantu minum obat malam</span></span><span class="task-time">19:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">å”åŠ©æ´—æ¾¡</span><span class="task-id">Bantu mandi</span></span><span class="task-time">20:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">å°±å¯¢æº–å‚™ï¼ˆç¿»èº«ã€æ‹èƒŒï¼‰</span><span class="task-id">Persiapan tidur (balik badan, tepuk punggung)</span></span><span class="task-time">21:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
          <div class="task-item"><input type="checkbox" onchange="toggleTask(this)"><span class="task-name"><span class="task-zh">å¤œé–“å·¡è¦–ï¼ˆç¢ºèªå®‰å…¨ï¼‰</span><span class="task-id">Pemeriksaan malam (pastikan aman)</span></span><span class="task-time">23:00</span><button class="task-delete" onclick="deleteTask(this)" title="åˆªé™¤">âœ•</button></div>
        </div>
      </div>

      <button class="btn" onclick="addTask()">â• æ–°å¢å·¥ä½œ Add Task</button>
    </section>

    <!-- ========== å³æ™‚ç¿»è­¯ ========== -->
    <section id="translate" class="section">
      <h2 style="margin-bottom:1.25rem">å³æ™‚ç¿»è­¯ Real-time Translation</h2>

      <div class="translate-box">
        <label>ä¾†æºèªè¨€ Source</label>
        <select id="source-lang">
          <option value="zh-TW" selected>ç¹é«”ä¸­æ–‡</option>
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
          <option value="id">Bahasa Indonesia</option>
          <option value="vi">Tiáº¿ng Viá»‡t</option>
          <option value="th">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</option>
          <option value="en">English</option>
        </select>
        <textarea id="source-text" placeholder="è¼¸å…¥æ–‡å­—... Type here..."></textarea>
      </div>

      <div style="text-align:center;font-size:2rem;margin:0.5rem 0">â¬‡ï¸</div>

      <div class="translate-box">
        <label>ç›®æ¨™èªè¨€ Target</label>
        <select id="target-lang">
          <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
          <option value="id" selected>Bahasa Indonesia</option>
          <option value="vi">Tiáº¿ng Viá»‡t</option>
          <option value="th">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</option>
          <option value="tl">Filipino</option>
          <option value="en">English</option>
        </select>
        <textarea id="target-text" placeholder="ç¿»è­¯çµæœ..." readonly></textarea>
      </div>

      <div style="display:flex;gap:0.75rem;margin-top:1rem;flex-wrap:wrap">
        <button class="btn" onclick="translateText()" id="translate-btn">ğŸ”„ ç¿»è­¯ Translate</button>
        <button class="btn btn-gray" onclick="clearText()">ğŸ—‘ï¸ æ¸…é™¤ Clear</button>
      </div>

      <h3 style="margin:2rem 0 0.75rem;color:#1f2937;font-size:1.1rem">å¸¸ç”¨èªå¥ Common Phrases</h3>

      <button class="phrase-btn" onclick="quickTranslate('æ‚¨å¥½','Halo')"><div style="font-weight:700">æ‚¨å¥½</div><div style="color:#6b7280;font-size:0.875rem">Halo</div></button>
      <button class="phrase-btn" onclick="quickTranslate('åƒè—¥æ™‚é–“åˆ°äº†','Saatnya minum obat')"><div style="font-weight:700">åƒè—¥æ™‚é–“åˆ°äº†</div><div style="color:#6b7280;font-size:0.875rem">Saatnya minum obat</div></button>
      <button class="phrase-btn" onclick="quickTranslate('éœ€è¦å¹«å¿™å—ï¼Ÿ','Apakah Anda butuh bantuan?')"><div style="font-weight:700">éœ€è¦å¹«å¿™å—ï¼Ÿ</div><div style="color:#6b7280;font-size:0.875rem">Apakah Anda butuh bantuan?</div></button>
      <button class="phrase-btn" onclick="quickTranslate('æˆ‘å€‘å»æ•£æ­¥','Mari kita jalan-jalan')"><div style="font-weight:700">æˆ‘å€‘å»æ•£æ­¥</div><div style="color:#6b7280;font-size:0.875rem">Mari kita jalan-jalan</div></button>
      <button class="phrase-btn" onclick="quickTranslate('è«‹å–æ°´','Silakan minum air')"><div style="font-weight:700">è«‹å–æ°´</div><div style="color:#6b7280;font-size:0.875rem">Silakan minum air</div></button>
      <button class="phrase-btn" onclick="quickTranslate('æ‚¨ä»Šå¤©æ„Ÿè¦ºå¦‚ä½•ï¼Ÿ','Bagaimana perasaan Anda hari ini?')"><div style="font-weight:700">æ‚¨ä»Šå¤©æ„Ÿè¦ºå¦‚ä½•ï¼Ÿ</div><div style="color:#6b7280;font-size:0.875rem">Bagaimana perasaan Anda hari ini?</div></button>
      <button class="phrase-btn" onclick="quickTranslate('è«‹ç¿»èº«','Tolong balik badan')"><div style="font-weight:700">è«‹ç¿»èº«</div><div style="color:#6b7280;font-size:0.875rem">Tolong balik badan</div></button>
      <button class="phrase-btn" onclick="quickTranslate('ç¾åœ¨è¦æ›å°¿å¸ƒ','Sekarang ganti popok')"><div style="font-weight:700">ç¾åœ¨è¦æ›å°¿å¸ƒ</div><div style="color:#6b7280;font-size:0.875rem">Sekarang ganti popok</div></button>

      <div id="api-status" class="alert alert-yellow" style="margin-top:1.5rem">
        <span style="font-size:1.25rem">ğŸ’¡</span>
        <span id="status-text">ç­‰å¾…è¨­å®š...</span>
      </div>
    </section>

    <!-- ========== åŸ¹è¨“èª²ç¨‹ ========== -->
    <section id="training" class="section">
      <h2 style="margin-bottom:0.5rem">åŸ¹è¨“èª²ç¨‹ Training Courses</h2>
      <p style="color:#6b7280;margin-bottom:1.25rem;font-size:0.9rem">é»æ“Šèª²ç¨‹å¡ç‰‡é–‹å§‹å­¸ç¿’ / Klik kartu kursus untuk mulai belajar</p>

      <!-- Progress Overview -->
      <div class="progress-overview">
        <div>
          <h3>å­¸ç¿’é€²åº¦ Progress</h3>
          <div style="font-size:0.875rem;opacity:0.85">å®Œæˆèª²ç¨‹æ•¸ Completed courses</div>
        </div>
        <div style="text-align:right">
          <div class="progress-count"><span id="completed-count">0</span>/6</div>
          <div style="font-size:0.8rem;opacity:0.85">èª²ç¨‹ courses</div>
        </div>
      </div>
      <div class="progress-bar-wrap">
        <div class="progress-bar" id="overall-progress" style="width:0%"></div>
      </div>

      <div class="training-grid">
        <div class="training-card" id="card-hygiene" onclick="openLesson('hygiene')">
          <div class="completed-badge">âœ“</div>
          <div class="card-icon">ğŸš¿</div>
          <h3>å€‹äººè¡›ç”Ÿç…§è­·</h3>
          <p>Personal Hygiene</p>
        </div>
        <div class="training-card" id="card-meal" onclick="openLesson('meal')">
          <div class="completed-badge">âœ“</div>
          <div class="card-icon">ğŸš</div>
          <h3>é£²é£Ÿç…§è­·</h3>
          <p>Meal Care</p>
        </div>
        <div class="training-card" id="card-activity" onclick="openLesson('activity')">
          <div class="completed-badge">âœ“</div>
          <div class="card-icon">â™¿</div>
          <h3>æ´»å‹•è¼”åŠ©</h3>
          <p>Activity Assistance</p>
        </div>
        <div class="training-card" id="card-vital" onclick="openLesson('vital')">
          <div class="completed-badge">âœ“</div>
          <div class="card-icon">ğŸ©º</div>
          <h3>ç”Ÿç†ç›£æ¸¬</h3>
          <p>Vital Signs</p>
        </div>
        <div class="training-card" id="card-medication" onclick="openLesson('medication')">
          <div class="completed-badge">âœ“</div>
          <div class="card-icon">ğŸ’Š</div>
          <h3>ç”¨è—¥ç®¡ç†</h3>
          <p>Medication</p>
        </div>
        <div class="training-card" id="card-tube" onclick="openLesson('tube')">
          <div class="completed-badge">âœ“</div>
          <div class="card-icon">ğŸ¥</div>
          <h3>ç®¡è·¯ç…§é¡§</h3>
          <p>Tube Care</p>
        </div>
      </div>
    </section>

    <!-- ========== ç·Šæ€¥è™•ç† ========== -->
    <section id="emergency" class="section">
      <h2 style="margin-bottom:1.25rem">ç·Šæ€¥è™•ç†æŒ‡å— Emergency Guide</h2>

      <div class="emergency-banner">
        <span style="font-size:2.5rem">âš ï¸</span>
        <div>
          <div>ç·Šæ€¥æƒ…æ³è«‹ç«‹å³æ’¥æ‰“ 119 æˆ–è¯ç¹«å®¶å±¬ï¼</div>
          <div style="font-size:0.875rem;font-weight:400;margin-top:0.25rem">In case of emergency, call 119 or contact family!</div>
        </div>
      </div>

      <div class="emergency-card">
        <div class="emergency-title">ğŸ¤• è·Œå€’è™•ç† Fall Management</div>
        <ol class="emergency-steps">
          <li><strong>ä¿æŒå†·éœï¼Œä¸è¦ç§»å‹•ç—…æ‚£</strong><br><span style="color:#6b7280;font-size:0.875rem">Tetap tenang, jangan pindahkan pasien</span></li>
          <li><strong>å¤§è²å‘¼å«ç¢ºèªæ„è­˜</strong><br><span style="color:#6b7280;font-size:0.875rem">Panggil keras untuk cek kesadaran</span></li>
          <li><strong>æª¢æŸ¥æ˜¯å¦æœ‰å‡ºè¡€ï¼Œè¼•è¼•åŠ å£“</strong><br><span style="color:#6b7280;font-size:0.875rem">Periksa apakah ada perdarahan, tekan lembut</span></li>
          <li><strong>ç«‹å³æ’¥æ‰“ 119</strong><br><span style="color:#6b7280;font-size:0.875rem">Segera hubungi 119</span></li>
          <li><strong>è¨˜éŒ„è·Œå€’æ™‚é–“èˆ‡åœ°é»</strong><br><span style="color:#6b7280;font-size:0.875rem">Catat waktu dan lokasi jatuh</span></li>
          <li><strong>ç­‰å¾…æ•‘æ´ï¼Œä¿æŒé™ªä¼´</strong><br><span style="color:#6b7280;font-size:0.875rem">Tunggu bantuan, tetap temani pasien</span></li>
        </ol>
      </div>

      <div class="emergency-card">
        <div class="emergency-title">ğŸ˜® å—†å’³è™•ç† Choking Management</div>
        <ol class="emergency-steps">
          <li><strong>ç«‹å³åœæ­¢é€²é£Ÿ</strong><br><span style="color:#6b7280;font-size:0.875rem">Segera hentikan makan</span></li>
          <li><strong>è®“ç—…æ‚£èº«é«”å‰å‚¾ï¼Œé¼“å‹µç”¨åŠ›å’³å—½</strong><br><span style="color:#6b7280;font-size:0.875rem">Condongkan tubuh ke depan, dorong untuk batuk</span></li>
          <li><strong>ç”¨æ‰‹æŒæ‹æ‰“èƒŒéƒ¨ 5 æ¬¡</strong><br><span style="color:#6b7280;font-size:0.875rem">Tepuk punggung 5 kali dengan telapak tangan</span></li>
          <li><strong>è‹¥ç„¡æ•ˆï¼Œæ–½è¡Œå“ˆå§†ç«‹å…‹æ€¥æ•‘æ³•</strong><br><span style="color:#6b7280;font-size:0.875rem">Jika tidak berhasil, lakukan manuver Heimlich</span></li>
          <li><strong>ç«‹å³æ’¥æ‰“ 119</strong><br><span style="color:#6b7280;font-size:0.875rem">Segera hubungi 119</span></li>
        </ol>
      </div>

      <div class="emergency-card">
        <div class="emergency-title">ğŸ¬ ä½è¡€ç³–è™•ç† Low Blood Sugar</div>
        <ol class="emergency-steps">
          <li><strong>ç¢ºèªç—‡ç‹€ï¼šå†’æ±—ã€ç™¼æŠ–ã€è‡‰è‰²è’¼ç™½</strong><br><span style="color:#6b7280;font-size:0.875rem">Gejala: berkeringat, gemetar, pucat</span></li>
          <li><strong>ç«‹å³çµ¦äºˆå«ç³–é£²æ–™æˆ–ç³–æœ</strong><br><span style="color:#6b7280;font-size:0.875rem">Berikan minuman manis atau permen</span></li>
          <li><strong>è®“ç—…æ‚£åä¸‹ä¼‘æ¯</strong><br><span style="color:#6b7280;font-size:0.875rem">Dudukkan pasien dan istirahat</span></li>
          <li><strong>15 åˆ†é˜å¾Œæ¸¬é‡è¡€ç³–å€¼</strong><br><span style="color:#6b7280;font-size:0.875rem">Ukur gula darah setelah 15 menit</span></li>
          <li><strong>è‹¥ç„¡æ”¹å–„ï¼Œç«‹å³æ’¥æ‰“ 119</strong><br><span style="color:#6b7280;font-size:0.875rem">Jika tidak membaik, hubungi 119</span></li>
        </ol>
      </div>

      <div class="emergency-card">
        <div class="emergency-title">ğŸ’” å¿ƒè‚ºå¾©ç”¦è¡“ CPR</div>
        <div class="warning-box">
          <span>âš ï¸</span>
          <span>å…ˆæ’¥æ‰“ 119 å¾Œå†æ–½è¡Œ CPR / Hubungi 119 dulu sebelum CPR</span>
        </div>
        <ol class="emergency-steps">
          <li><strong>ç¢ºèªç’°å¢ƒå®‰å…¨ï¼Œè¼•æ‹é›™è‚©ç¢ºèªæ„è­˜</strong><br><span style="color:#6b7280;font-size:0.875rem">Pastikan lingkungan aman, tepuk bahu</span></li>
          <li><strong>å‘¼å«æ•‘æ´ï¼Œæ’¥æ‰“ 119</strong><br><span style="color:#6b7280;font-size:0.875rem">Panggil bantuan, hubungi 119</span></li>
          <li><strong>å°‡ç—…æ‚£å¹³èººï¼Œé€²è¡Œèƒ¸éƒ¨æŒ‰å£“ï¼ˆæ¯åˆ†é˜ 100-120 æ¬¡ï¼‰</strong><br><span style="color:#6b7280;font-size:0.875rem">Baringkan, lakukan kompresi dada 100-120x/menit</span></li>
          <li><strong>æ¯ 30 æ¬¡æŒ‰å£“å¾Œï¼Œé€²è¡Œ 2 æ¬¡äººå·¥å‘¼å¸</strong><br><span style="color:#6b7280;font-size:0.875rem">Setiap 30 kompresi, berikan 2 napas buatan</span></li>
          <li><strong>æŒçºŒè‡³æ•‘æ´åˆ°é”</strong><br><span style="color:#6b7280;font-size:0.875rem">Lanjutkan sampai bantuan tiba</span></li>
        </ol>
      </div>
    </section>

  </main>
</div>

<!-- ========== ç”¨è—¥æé†’é¢æ¿ ========== -->
<div id="med-reminder-section" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:white;z-index:300;overflow-y:auto;padding-bottom:4rem;">
  <div style="max-width:1200px;margin:0 auto;padding:1.5rem;">
    <h2 style="margin-bottom:0.5rem">ğŸ’Š ç”¨è—¥æé†’ Pengingat Obat</h2>
    <p style="color:#6b7280;font-size:0.9rem;margin-bottom:1.5rem">APP é–‹è‘—æ™‚ï¼Œæ™‚é–“åˆ°è‡ªå‹•æé†’ / Saat APP terbuka, pengingat otomatis</p>
    <div style="background:linear-gradient(135deg,#2563eb,#7c3aed);border-radius:14px;padding:1.25rem;color:white;text-align:center;margin-bottom:1.5rem;">
      <div style="font-size:0.875rem;opacity:0.85;margin-bottom:0.25rem">ç¾åœ¨æ™‚é–“ Waktu Sekarang</div>
      <div id="med-clock" style="font-size:2.5rem;font-weight:800;letter-spacing:2px">00:00</div>
      <div id="med-next" style="font-size:0.85rem;opacity:0.9;margin-top:0.5rem">å°šæœªè¨­å®šæé†’</div>
    </div>
    <div style="background:#f9fafb;border:2px solid #e5e7eb;border-radius:12px;padding:1.25rem;margin-bottom:1.5rem;">
      <h3 style="font-size:1rem;font-weight:700;margin-bottom:1rem;color:#2563eb">â• æ–°å¢ç”¨è—¥æé†’</h3>
      <div style="display:grid;gap:0.75rem;">
        <div><label style="font-size:0.85rem;font-weight:600;color:#374151;display:block;margin-bottom:0.3rem">è—¥å Nama Obat</label><input id="med-name-zh" type="text" placeholder="ä¾‹å¦‚ï¼šè¡€å£“è—¥" oninput="autoTranslateMedName(this.value)" style="width:100%;padding:0.7rem;border:2px solid #e5e7eb;border-radius:8px;font-size:0.95rem;"></div>
        <div><label style="font-size:0.85rem;font-weight:600;color:#374151;display:block;margin-bottom:0.3rem">å°å°¼æ–‡ï¼ˆè‡ªå‹•ç¿»è­¯ï¼‰</label><input id="med-name-id" type="text" placeholder="â³ è¼¸å…¥ä¸­æ–‡å¾Œè‡ªå‹•ç¿»è­¯..." style="width:100%;padding:0.7rem;border:2px solid #e5e7eb;border-radius:8px;font-size:0.95rem;color:#2563eb;background:#f0f7ff;"></div>
        <div><label style="font-size:0.85rem;font-weight:600;color:#374151;display:block;margin-bottom:0.3rem">åŠ‘é‡ Dosis</label><input id="med-dose" type="text" placeholder="ä¾‹å¦‚ï¼š1 é¡† / 1 butir" style="width:100%;padding:0.7rem;border:2px solid #e5e7eb;border-radius:8px;font-size:0.95rem;"></div>
        <div><label style="font-size:0.85rem;font-weight:600;color:#374151;display:block;margin-bottom:0.3rem">æé†’æ™‚é–“ Waktu</label><input id="med-time" type="time" style="width:100%;padding:0.7rem;border:2px solid #e5e7eb;border-radius:8px;font-size:0.95rem;"></div>
        <div><label style="font-size:0.85rem;font-weight:600;color:#374151;display:block;margin-bottom:0.3rem">å‚™è¨» Catatan</label><input id="med-note" type="text" placeholder="ä¾‹å¦‚ï¼šé£¯å¾Œæœç”¨ / Setelah makan" style="width:100%;padding:0.7rem;border:2px solid #e5e7eb;border-radius:8px;font-size:0.95rem;"></div>
      </div>
      <button onclick="addMedReminder()" style="width:100%;margin-top:1rem;padding:0.9rem;background:#10b981;color:white;border:none;border-radius:10px;font-size:1rem;font-weight:700;cursor:pointer;">â• æ–°å¢æé†’ Tambah Pengingat</button>
    </div>
    <h3 style="font-size:1rem;font-weight:700;margin-bottom:0.75rem">ğŸ“‹ ç”¨è—¥æ™‚åˆ»è¡¨ Jadwal Obat</h3>
    <div id="med-list"><div style="text-align:center;padding:2rem;color:#9ca3af;">å°šæœªè¨­å®šä»»ä½•ç”¨è—¥æé†’<br>Belum ada pengingat obat</div></div>
  </div>
</div>

<!-- ========== TRAINING MODAL ========== -->
<div class="modal-overlay" id="lesson-modal" onclick="closeModalOnOverlay(event)">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div style="font-size:0.8rem;opacity:0.8;margin-bottom:0.2rem" id="modal-category">åŸ¹è¨“èª²ç¨‹</div>
        <h2 id="modal-title">èª²ç¨‹æ¨™é¡Œ</h2>
      </div>
      <button class="modal-close" onclick="closeLesson()">âœ•</button>
    </div>

    <div class="modal-body" id="modal-body">
      <!-- content injected by JS -->
    </div>

    <div class="modal-footer">
      <button class="btn btn-gray" onclick="closeLesson()">é—œé–‰ Close</button>
      <button class="btn btn-green" id="complete-btn" onclick="markComplete()">âœ… å®Œæˆèª²ç¨‹ Complete</button>
    </div>
  </div>
</div>

<script>
  // ===================== CONFIG =====================
  const GOOGLE_TRANSLATE_API_KEY = 'AIzaSyDcwz7AvpvjfEvRqPuXZ7s-uxKbbqhRa9I';

  // ===================== LESSON DATA =====================
  const lessons = {
    hygiene: {
      title: 'å€‹äººè¡›ç”Ÿç…§è­· Personal Hygiene',
      category: 'åŸºç¤ç…§è­· Basic Care',
      intro: 'è‰¯å¥½çš„å€‹äººè¡›ç”Ÿç…§è­·èƒ½ç¶­è­·é•·è€…çš„å°Šåš´èˆ‡å¥åº·ï¼Œé é˜²æ„ŸæŸ“èˆ‡å£“ç˜¡ã€‚\nPerawatan kebersihan yang baik menjaga martabat dan kesehatan lansia.',
      steps: [
        { zh: 'æ¯å¤©æ—©æ™¨å”åŠ©é•·è€…æ´—è‡‰ã€åˆ·ç‰™', id: 'Bantu lansia cuci muka dan gosok gigi setiap pagi', note: 'ä½¿ç”¨æº«æ°´ / Gunakan air hangat' },
        { zh: 'æ¯ 2â€“3 å¤©å”åŠ©æ²æµ´ï¼Œå¤å¤©å¯æ¯å¤©', id: 'Bantu mandi setiap 2-3 hari, musim panas bisa setiap hari', note: 'æ³¨æ„é˜²æ»‘å®‰å…¨ / Perhatikan keamanan anti-selip' },
        { zh: 'æ²æµ´å‰ç¢ºèªæ°´æº«ï¼ˆ36â€“38Â°C ç‚ºå®œï¼‰', id: 'Periksa suhu air sebelum mandi (36-38Â°C)', note: 'ç”¨æ‰‹è…•æ¸¬è©¦æ°´æº« / Tes suhu dengan pergelangan tangan' },
        { zh: 'å”åŠ©æ›´æ›ä¹¾æ·¨è¡£ç‰©ï¼Œæ³¨æ„ä¿æš–', id: 'Bantu ganti pakaian bersih, perhatikan kehangatan', note: '' },
        { zh: 'å®šæœŸä¿®å‰ªæŒ‡ç”²ï¼Œé¿å…æŒ‡ç”²éé•·', id: 'Potong kuku secara teratur', note: 'é£¯å¾ŒæŒ‡ç”²è¼ƒè»Ÿå®¹æ˜“å‰ª / Setelah makan kuku lebih lunak' },
        { zh: 'è§€å¯Ÿçš®è†šæ˜¯å¦æœ‰ç´…è…«ã€å£“ç˜¡', id: 'Perhatikan kulit apakah ada kemerahan atau luka tekan', note: 'ç‰¹åˆ¥æ³¨æ„éª¨çªå‡ºè™• / Perhatikan area tonjolan tulang' },
      ],
      warning: 'è‹¥é•·è€…æœ‰å‚·å£æˆ–ç‰¹æ®Šçš®è†šå•é¡Œï¼Œè«‹ç«‹å³å‘ŠçŸ¥å®¶å±¬æˆ–è­·ç†äººå“¡ã€‚\nJika ada luka atau masalah kulit khusus, segera beritahu keluarga.',
      tip: 'è®“é•·è€…å„˜é‡è‡ªå·±å®Œæˆèƒ½åšåˆ°çš„å‹•ä½œï¼Œç¶­è­·è‡ªä¸»æ€§ã€‚\nBiarkan lansia melakukan sendiri apa yang bisa, untuk menjaga kemandirian.',
      vocab: [
        { zh: 'æ´—è‡‰', id: 'cuci muka' }, { zh: 'åˆ·ç‰™', id: 'gosok gigi' },
        { zh: 'æ´—æ¾¡', id: 'mandi' }, { zh: 'æ›´è¡£', id: 'ganti pakaian' },
        { zh: 'å‰ªæŒ‡ç”²', id: 'potong kuku' }, { zh: 'çš®è†š', id: 'kulit' },
      ]
    },
    meal: {
      title: 'é£²é£Ÿç…§è­· Meal Care',
      category: 'åŸºç¤ç…§è­· Basic Care',
      intro: 'é©ç•¶çš„é£²é£Ÿç…§è­·èƒ½ç¢ºä¿é•·è€…ç²å¾—å……è¶³ç‡Ÿé¤Šï¼Œä¸¦é é˜²å—†å’³å±éšªã€‚\nPerawatan makan yang tepat memastikan nutrisi cukup dan mencegah tersedak.',
      steps: [
        { zh: 'é¤å‰å”åŠ©é•·è€…æ´—æ‰‹', id: 'Bantu lansia cuci tangan sebelum makan', note: '' },
        { zh: 'è®“é•·è€…åç›´æˆ–åŠåè‡¥ï¼ˆè‡³å°‘ 45 åº¦ï¼‰', id: 'Posisikan lansia duduk tegak atau semi-duduk (min 45 derajat)', note: 'é é˜²å—†å’³ / Mencegah tersedak' },
        { zh: 'é£Ÿç‰©åˆ‡å°å¡Šæˆ–æ‰“æˆæ³¥ç‹€ï¼ˆä¾éœ€è¦ï¼‰', id: 'Potong makanan kecil atau haluskan (sesuai kebutuhan)', note: '' },
        { zh: 'æ¯å£é£Ÿç‰©å°‘é‡ï¼Œè®“é•·è€…å……åˆ†å’€åš¼å¾Œå†é¤µä¸‹ä¸€å£', id: 'Setiap suap sedikit, biarkan kunyah dulu baru suap berikutnya', note: '' },
        { zh: 'é€²é£Ÿä¸­é¼“å‹µé©é‡é£²æ°´', id: 'Dorong minum air secukupnya saat makan', note: 'æ¯å¤©è‡³å°‘ 1500â€“2000ml / Minimal 1500-2000ml per hari' },
        { zh: 'è¨˜éŒ„æ¯é¤é€²é£Ÿé‡èˆ‡é£Ÿæ…¾ç‹€æ³', id: 'Catat jumlah makan dan nafsu makan setiap kali makan', note: '' },
        { zh: 'é¤å¾Œè®“é•·è€…ä¿æŒåå§¿ 30 åˆ†é˜', id: 'Setelah makan, biarkan duduk selama 30 menit', note: 'é˜²æ­¢é€†æµ / Mencegah refluks' },
      ],
      warning: 'è‹¥é•·è€…é€²é£Ÿæ™‚æŒçºŒå—†å’³ï¼Œæ‡‰åœæ­¢é€²é£Ÿä¸¦é€šçŸ¥è­·ç†äººå“¡ã€‚\nJika terus tersedak saat makan, hentikan dan beritahu perawat.',
      tip: 'æº«ç†±çš„é£Ÿç‰©æ¯”å†·é£Ÿæ›´å®¹æ˜“ååš¥ã€‚å¯é©ç•¶å¢åŠ é£Ÿç‰©é»ç¨ åº¦ã€‚\nMakanan hangat lebih mudah ditelan. Bisa tambahkan pengental jika perlu.',
      vocab: [
        { zh: 'åƒé£¯', id: 'makan' }, { zh: 'å–æ°´', id: 'minum air' },
        { zh: 'å—†å’³', id: 'tersedak' }, { zh: 'é£Ÿæ…¾', id: 'nafsu makan' },
        { zh: 'åˆ‡ç¢', id: 'cincang halus' }, { zh: 'æ”ªæ‹Œ', id: 'aduk' },
      ]
    },
    activity: {
      title: 'æ´»å‹•è¼”åŠ© Activity Assistance',
      category: 'ç§»å‹•ç…§è­· Mobility Care',
      intro: 'æ­£ç¢ºçš„ç§»ä½èˆ‡ç¿»èº«æŠ€å·§èƒ½ä¿è­·é•·è€…å®‰å…¨ï¼ŒåŒæ™‚ä¿è­·ç…§è­·è€…çš„è…°éƒ¨å¥åº·ã€‚\nTeknik pindah dan balik badan yang benar melindungi lansia dan punggung perawat.',
      steps: [
        { zh: 'æ¯ 2 å°æ™‚å”åŠ©è‡¥åºŠé•·è€…ç¿»èº«ä¸€æ¬¡', id: 'Bantu lansia berbaring balik badan setiap 2 jam', note: 'é é˜²å£“ç˜¡ / Mencegah luka tekan' },
        { zh: 'ç¿»èº«å‰å‘ŠçŸ¥é•·è€…ï¼Œé¿å…é©šåš‡', id: 'Beritahu lansia sebelum membalikkan badan', note: '' },
        { zh: 'ç§»ä½æ™‚å½æ›²è†è“‹ï¼Œé¿å…å½è…°æ¬é‡', id: 'Tekuk lutut saat memindahkan, jangan membungkuk', note: 'ä¿è­·è‡ªèº«è…°éƒ¨ / Lindungi punggung Anda' },
        { zh: 'å¾åºŠç§»è‡³è¼ªæ¤…ï¼šå…ˆå›ºå®šè¼ªæ¤…ç…è»Š', id: 'Dari tempat tidur ke kursi roda: kunci rem dulu', note: '' },
        { zh: 'å”åŠ©ç«™ç«‹æ™‚ï¼Œè®“é•·è€…å…ˆåç©©å†ç·©æ…¢ç«™èµ·', id: 'Saat bantu berdiri, duduk stabil dulu lalu pelan-pelan berdiri', note: '' },
        { zh: 'æ¯å¤©é€²è¡Œ 10â€“15 åˆ†é˜çš„ç°¡æ˜“è‚¢é«”é‹å‹•', id: 'Lakukan latihan ringan 10-15 menit setiap hari', note: 'ä¾é†«å¸«å»ºè­° / Sesuai anjuran dokter' },
      ],
      warning: 'ç§»ä½éç¨‹ä¸­è‹¥é•·è€…æ„Ÿåˆ°ç–¼ç—›æˆ–ä¸é©ï¼Œæ‡‰ç«‹å³åœæ­¢ã€‚\nJika lansia kesakitan saat dipindahkan, segera hentikan.',
      tip: 'ä½¿ç”¨ç§»ä½æ»‘æ¿æˆ–ç§»ä½è…°å¸¶å¯ä»¥æ›´å®‰å…¨åœ°å”åŠ©ç§»ä½ã€‚\nGunakan papan geser atau sabuk transfer untuk memindahkan dengan lebih aman.',
      vocab: [
        { zh: 'ç¿»èº«', id: 'balik badan' }, { zh: 'åèµ·ä¾†', id: 'duduk' },
        { zh: 'ç«™èµ·ä¾†', id: 'berdiri' }, { zh: 'è¼ªæ¤…', id: 'kursi roda' },
        { zh: 'æ‰¶è‘—', id: 'pegang' }, { zh: 'æ…¢æ…¢ä¾†', id: 'pelan-pelan' },
      ]
    },
    vital: {
      title: 'ç”Ÿç†ç›£æ¸¬ Vital Signs Monitoring',
      category: 'å¥åº·ç›£æ¸¬ Health Monitoring',
      intro: 'å®šæœŸç›£æ¸¬ç”Ÿç†æ•¸å€¼èƒ½æ—©æœŸç™¼ç¾ç•°å¸¸ï¼ŒåŠæ™‚è™•ç†ã€‚\nPemantauan tanda vital secara rutin membantu deteksi dini kelainan.',
      steps: [
        { zh: 'æ¯å¤©å›ºå®šæ™‚é–“æ¸¬é‡è¡€å£“ï¼ˆæ—©æ™šå„ä¸€æ¬¡ï¼‰', id: 'Ukur tekanan darah setiap hari pada waktu yang sama (pagi dan malam)', note: 'æ­£å¸¸å€¼ï¼š120/80 mmHg ä»¥ä¸‹' },
        { zh: 'æ¸¬è¡€å£“å‰è®“é•·è€…ä¼‘æ¯ 5 åˆ†é˜ï¼Œä¸èªªè©±', id: 'Istirahat 5 menit sebelum ukur tensi, jangan bicara', note: '' },
        { zh: 'ç³–å°¿ç—…é•·è€…æ¯å¤©æ¸¬è¡€ç³–ï¼ˆç©ºè…¹åŠé£¯å¾Œ 2 å°æ™‚ï¼‰', id: 'Lansia diabetes ukur gula darah setiap hari (puasa dan 2 jam setelah makan)', note: 'æ­£å¸¸ç©ºè…¹ï¼š70â€“100 mg/dL' },
        { zh: 'æ¯å¤©æ¸¬é‡é«”æº«', id: 'Ukur suhu tubuh setiap hari', note: 'æ­£å¸¸å€¼ï¼š36â€“37.5Â°C' },
        { zh: 'è§€å¯Ÿå‘¼å¸é »ç‡ï¼ˆæ­£å¸¸æ¯åˆ†é˜ 12â€“20 æ¬¡ï¼‰', id: 'Perhatikan frekuensi napas (normal 12-20 kali per menit)', note: '' },
        { zh: 'å°‡æ‰€æœ‰æ•¸å€¼è¨˜éŒ„åœ¨å¥åº·è¨˜éŒ„æœ¬', id: 'Catat semua angka di buku catatan kesehatan', note: 'æœ‰ç•°å¸¸ç«‹å³é€šçŸ¥å®¶å±¬' },
      ],
      warning: 'è¡€å£“è¶…é 140/90 æˆ–ä½æ–¼ 90/60ï¼›è¡€ç³–ä½æ–¼ 70 æˆ–é«˜æ–¼ 300ï¼Œæ‡‰ç«‹å³é€šçŸ¥å®¶å±¬ã€‚\nTensi >140/90 atau <90/60; gula darah <70 atau >300, segera beritahu keluarga.',
      tip: 'æ¸¬é‡æ™‚é–“å’Œå§¿å‹¢ä¿æŒä¸€è‡´ï¼Œæ•¸å€¼æ‰å…·æœ‰å¯æ¯”è¼ƒæ€§ã€‚\nWaktu dan posisi pengukuran harus konsisten agar angka bisa dibandingkan.',
      vocab: [
        { zh: 'è¡€å£“', id: 'tekanan darah' }, { zh: 'è¡€ç³–', id: 'gula darah' },
        { zh: 'é«”æº«', id: 'suhu tubuh' }, { zh: 'è„ˆæ', id: 'denyut nadi' },
        { zh: 'æ­£å¸¸', id: 'normal' }, { zh: 'ç•°å¸¸', id: 'tidak normal' },
      ]
    },
    medication: {
      title: 'ç”¨è—¥ç®¡ç† Medication Management',
      category: 'é†«ç™‚ç…§è­· Medical Care',
      intro: 'æ­£ç¢ºçš„ç”¨è—¥ç®¡ç†èƒ½ç¢ºä¿æ²»ç™‚æ•ˆæœï¼Œé¿å…è—¥ç‰©éŒ¯èª¤çš„å±å®³ã€‚\nManajemen obat yang benar memastikan efek pengobatan dan mencegah kesalahan.',
      steps: [
        { zh: 'ç¢ºèªã€Œäº”æ­£ç¢ºã€ï¼šæ­£ç¢ºç—…äººã€è—¥å“ã€åŠ‘é‡ã€æ™‚é–“ã€æ–¹å¼', id: 'Konfirmasi 5 benar: pasien, obat, dosis, waktu, cara pemberian', note: 'æ¯æ¬¡çµ¦è—¥å‰éƒ½è¦ç¢ºèª' },
        { zh: 'æŒ‰ç…§é†«å¸«æŒ‡ç¤ºçš„æ™‚é–“çµ¦è—¥ï¼Œä¸å¯è‡ªè¡Œèª¿æ•´', id: 'Berikan obat sesuai waktu yang ditentukan dokter, jangan ubah sendiri', note: '' },
        { zh: 'çµ¦è—¥å¾Œç¢ºèªé•·è€…å·²åä¸‹ï¼ˆå¼µå˜´ç¢ºèªï¼‰', id: 'Setelah memberi obat, pastikan sudah ditelan (cek buka mulut)', note: '' },
        { zh: 'è¨˜éŒ„æ¯æ¬¡çµ¦è—¥æ™‚é–“èˆ‡é•·è€…åæ‡‰', id: 'Catat waktu pemberian dan reaksi lansia setiap kali', note: '' },
        { zh: 'è—¥å“å­˜æ”¾åœ¨ä¹¾ç‡¥é™°æ¶¼è™•ï¼Œé é›¢å…’ç«¥', id: 'Simpan obat di tempat kering, sejuk, jauh dari anak-anak', note: '' },
        { zh: 'ç™¼ç¾é•·è€…ä¸é¡˜æœè—¥ï¼Œé€šçŸ¥å®¶å±¬ï¼Œä¸å¯å¼·è¿«', id: 'Jika lansia menolak minum obat, beritahu keluarga, jangan paksa', note: '' },
      ],
      warning: 'çµ•å°ä¸å¯è‡ªè¡Œå¢æ¸›è—¥é‡æˆ–çµ¦äºˆéé†«å¸«é–‹ç«‹çš„è—¥å“ã€‚\nJangan pernah menambah/mengurangi dosis atau memberi obat yang tidak diresepkan dokter.',
      tip: 'å¯ä½¿ç”¨æ¯æ—¥è—¥ç›’ï¼ˆpill organizerï¼‰å¹«åŠ©åˆ†é¡è—¥å“ã€‚\nGunakan kotak obat harian (pill organizer) untuk membantu mengatur obat.',
      vocab: [
        { zh: 'è—¥', id: 'obat' }, { zh: 'åŠ‘é‡', id: 'dosis' },
        { zh: 'é£¯å‰', id: 'sebelum makan' }, { zh: 'é£¯å¾Œ', id: 'setelah makan' },
        { zh: 'ç©ºè…¹', id: 'perut kosong' }, { zh: 'å‰¯ä½œç”¨', id: 'efek samping' },
      ]
    },
    tube: {
      title: 'ç®¡è·¯ç…§é¡§ Tube Care',
      category: 'å°ˆæ¥­ç…§è­· Advanced Care',
      intro: 'ç®¡è·¯ç…§é¡§éœ€è¦ç‰¹åˆ¥ç´°å¿ƒï¼Œä»»ä½•ç•°å¸¸æ‡‰ç«‹å³é€šçŸ¥è­·ç†äººå“¡ã€‚\nPerawatan selang membutuhkan kehati-hatian ekstra, laporkan kelainan segera.',
      steps: [
        { zh: 'æ¯æ¬¡é¤µé£Ÿå‰ç¢ºèªé¼»èƒƒç®¡ä½ç½®æ˜¯å¦æ­£ç¢º', id: 'Sebelum setiap pemberian makan, pastikan posisi NGT benar', note: 'å¯ç”¨æ³¨å°„å™¨å›æŠ½ç¢ºèª' },
        { zh: 'é¼»èƒƒç®¡æ¯å¤©ç”¨æ¸…æ°´æ¸…æ½”å›ºå®šçš„è† å¸ƒåŠé¼»å­”å‘¨åœ', id: 'Bersihkan plester dan sekitar hidung dengan air bersih setiap hari', note: '' },
        { zh: 'æ¯æ¬¡çŒé£Ÿå‰å¾Œä»¥ 30â€“50ml æº«é–‹æ°´æ²–æ´—ç®¡è·¯', id: 'Bilas selang dengan 30-50ml air hangat sebelum dan sesudah makan', note: 'é˜²æ­¢å µå¡ / Mencegah sumbatan' },
        { zh: 'æ°£åˆ‡ç—…æ‚£æ¯å¤©æ¸…æ½”æ°£åˆ‡å¥—ç®¡å‘¨åœçš®è†š', id: 'Bersihkan kulit sekitar trakeostomi setiap hari', note: '' },
        { zh: 'è§€å¯Ÿç®¡è·¯å›ºå®šæ˜¯å¦ç©©å®šï¼Œæœ‰ç„¡æ»²æ¼æˆ–ç•°å‘³', id: 'Perhatikan apakah selang stabil, ada kebocoran atau bau', note: '' },
        { zh: 'ç™¼ç¾ç•°å¸¸ï¼ˆæ»²æ¶²ã€å‡ºè¡€ã€å µå¡ï¼‰ç«‹å³é€šçŸ¥è­·ç†å¸«', id: 'Jika ada kelainan (bocor, berdarah, tersumbat), segera hubungi perawat', note: '' },
      ],
      warning: 'ç®¡è·¯ç…§é¡§å±¬æ–¼å°ˆæ¥­é†«ç™‚æ“ä½œï¼Œé¦–æ¬¡åŸ·è¡Œå‰å‹™å¿…ç”±è­·ç†äººå“¡å¯¦éš›ç¤ºç¯„æŒ‡å°ã€‚\nPerawatan selang adalah tindakan medis profesional, harus dipandu perawat terlebih dahulu.',
      tip: 'ä¿æŒç®¡è·¯è¨˜éŒ„ï¼ŒåŒ…æ‹¬çŒé£Ÿæ™‚é–“ã€é‡å’Œé•·è€…åæ‡‰ã€‚\nJaga catatan selang termasuk waktu pemberian, jumlah dan reaksi lansia.',
      vocab: [
        { zh: 'é¼»èƒƒç®¡', id: 'selang NGT' }, { zh: 'çŒé£Ÿ', id: 'pemberian makan via selang' },
        { zh: 'æ²–æ´—', id: 'bilas' }, { zh: 'å µå¡', id: 'tersumbat' },
        { zh: 'å›ºå®š', id: 'fiksasi' }, { zh: 'æ»²æ¼', id: 'bocor' },
      ]
    }
  };

  // ===================== STATE =====================
  let currentLesson = null;
  let completedLessons = new Set();
  let stepsDone = {};

  // ===================== TAB =====================
  function showTab(tabName, button) {
    const medPanel = document.getElementById('med-reminder-section');
    if (medPanel) medPanel.style.display = 'none';
    if (tabName === 'med-reminder') {
      if (medPanel) medPanel.style.display = 'block';
    } else {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
    }
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    button.classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // ===================== SERVICE WORKER =====================
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js')
      .then(() => console.log('âœ… SW registered'))
      .catch(e => console.error('SW error:', e));
  }

  // ===================== ç”¨è—¥æé†’ =====================
  let medReminders = [];
  let alertedToday = {};
  let medTranslateTimer = null;

  function autoTranslateMedName(val) {
    clearTimeout(medTranslateTimer);
    const el = document.getElementById('med-name-id');
    if (!val) { el.value = ''; return; }
    el.value = 'â³ ç¿»è­¯ä¸­...';
    medTranslateTimer = setTimeout(async () => {
      if (GOOGLE_TRANSLATE_API_KEY === 'YOUR_API_KEY_HERE') { el.value = ''; return; }
      try {
        const r = await fetch('https://translation.googleapis.com/language/translate/v2?key=' + GOOGLE_TRANSLATE_API_KEY, {
          method: 'POST', headers: {'Content-Type':'application/json'},
          body: JSON.stringify({q: val, source: 'zh-TW', target: 'id', format: 'text'})
        });
        const d = await r.json();
        el.value = d.data.translations[0].translatedText;
      } catch(e) { el.value = ''; }
    }, 800);
  }

  function updateMedClock() {
    const now = new Date();
    const t = String(now.getHours()).padStart(2,'0') + ':' + String(now.getMinutes()).padStart(2,'0');
    const el = document.getElementById('med-clock');
    if (el) el.textContent = t;
    const up = medReminders.filter(m => m.time > t).sort((a,b) => a.time.localeCompare(b.time));
    const nx = document.getElementById('med-next');
    if (nx) nx.textContent = up.length ? 'â­ ä¸‹ä¸€æ¬¡ï¼š' + up[0].time + ' ' + up[0].nameZh : (medReminders.length ? 'âœ… ä»Šæ—¥æé†’å·²å®Œæˆ' : 'å°šæœªè¨­å®šæé†’');
    const dk = now.toDateString();
    medReminders.forEach(m => {
      const k = dk + '-' + m.id;
      if (m.time === t && !alertedToday[k]) { alertedToday[k] = true; showMedAlert(m); }
    });
  }

  function showMedAlert(med) {
    if (navigator.vibrate) navigator.vibrate([500,200,500,200,500]);
    const ov = document.createElement('div');
    ov.setAttribute('data-med-ov','1');
    ov.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.75);z-index:9999;display:flex;align-items:center;justify-content:center;padding:1.5rem;';
    ov.innerHTML = '<div style="background:white;border-radius:20px;padding:2rem;max-width:380px;width:100%;text-align:center;">'
      + '<div style="font-size:3.5rem;margin-bottom:0.5rem">ğŸ’Š</div>'
      + '<div style="background:#fef3c7;color:#92400e;padding:0.3rem 1rem;border-radius:999px;font-size:0.85rem;font-weight:700;display:inline-block;margin-bottom:1rem">â° ' + med.time + ' ç”¨è—¥æ™‚é–“åˆ°ï¼</div>'
      + '<h2 style="font-size:1.4rem;font-weight:800;color:#1f2937;margin-bottom:0.2rem">' + med.nameZh + '</h2>'
      + '<p style="color:#2563eb;font-style:italic;margin-bottom:0.75rem">' + med.nameId + '</p>'
      + (med.dose ? '<p style="background:#eff6ff;padding:0.5rem;border-radius:8px;color:#1e3a8a;font-weight:600;margin-bottom:0.5rem">ğŸ’Š ' + med.dose + '</p>' : '')
      + (med.note ? '<p style="color:#6b7280;font-size:0.9rem;margin-bottom:0.75rem">ğŸ“ ' + med.note + '</p>' : '')
      + '<div style="display:flex;gap:0.75rem;margin-top:1rem;">'
      + '<button onclick="closeMedAlert()" style="flex:1;padding:0.8rem;background:#10b981;color:white;border:none;border-radius:10px;font-weight:700;cursor:pointer;font-size:0.95rem;">âœ… å·²æœè—¥</button>'
      + '<button onclick="snoozeMedAlert(\'' + med.id + '\')" style="flex:1;padding:0.8rem;background:#f59e0b;color:white;border:none;border-radius:10px;font-weight:700;cursor:pointer;font-size:0.95rem;">â° ç¨å¾Œæé†’</button>'
      + '</div></div>';
    document.body.appendChild(ov);
  }

  function closeMedAlert() {
    const ov = document.querySelector('[data-med-ov]');
    if (ov) ov.remove();
  }

  function snoozeMedAlert(medId) {
    closeMedAlert();
    setTimeout(() => { const m = medReminders.find(m => m.id === medId); if (m) showMedAlert(m); }, 5*60*1000);
  }

  async function addMedReminder() {
    const nameZh = document.getElementById('med-name-zh').value.trim();
    const nameId = document.getElementById('med-name-id').value.trim();
    const dose = document.getElementById('med-dose').value.trim();
    const time = document.getElementById('med-time').value;
    const note = document.getElementById('med-note').value.trim();
    if (!nameZh) { alert('âŒ è«‹è¼¸å…¥è—¥å'); return; }
    if (!time) { alert('âŒ è«‹è¨­å®šæ™‚é–“'); return; }
    const med = {id: Date.now().toString(), nameZh, nameId: (nameId && !nameId.includes('ç¿»è­¯')) ? nameId : nameZh, dose, time, note};
    medReminders.push(med);
    medReminders.sort((a,b) => a.time.localeCompare(b.time));
    renderMedList();
    ['med-name-zh','med-name-id','med-dose','med-time','med-note'].forEach(id => document.getElementById(id).value = '');
    alert('âœ… å·²æ–°å¢ã€Œ' + nameZh + 'ã€' + time + ' æé†’ï¼');
  }

  function renderMedList() {
    const el = document.getElementById('med-list');
    if (!el) return;
    if (!medReminders.length) { el.innerHTML = '<div style="text-align:center;padding:2rem;color:#9ca3af;">å°šæœªè¨­å®šæé†’<br>Belum ada pengingat</div>'; return; }
    el.innerHTML = medReminders.map(m =>
      '<div style="background:white;border:2px solid #e5e7eb;border-radius:12px;padding:1rem;margin-bottom:0.75rem;display:flex;align-items:center;gap:1rem;">'
      + '<div style="background:linear-gradient(135deg,#2563eb,#7c3aed);color:white;border-radius:10px;padding:0.5rem 0.75rem;text-align:center;min-width:58px;flex-shrink:0;font-weight:800;">' + m.time + '</div>'
      + '<div style="flex:1;"><b style="color:#1f2937;">' + m.nameZh + '</b>'
      + '<div style="color:#2563eb;font-size:0.85rem;font-style:italic;">' + m.nameId + '</div>'
      + (m.dose ? '<div style="color:#6b7280;font-size:0.8rem;">ğŸ’Š ' + m.dose + '</div>' : '')
      + (m.note ? '<div style="color:#6b7280;font-size:0.8rem;">ğŸ“ ' + m.note + '</div>' : '') + '</div>'
      + '<button onclick="deleteMed(\'' + m.id + '\')" style="background:none;border:none;color:#d1d5db;font-size:1.2rem;cursor:pointer;padding:0.3rem;" onmouseover="this.style.color='#ef4444'" onmouseout="this.style.color='#d1d5db'">âœ•</button></div>'
    ).join('');
  }

  function deleteMed(id) {
    const m = medReminders.find(m => m.id === id);
    if (m && confirm('ç¢ºå®šåˆªé™¤ã€Œ' + m.nameZh + 'ã€æé†’ï¼Ÿ')) { medReminders = medReminders.filter(x => x.id !== id); renderMedList(); }
  }

  setInterval(updateMedClock, 1000);
  updateMedClock();

</script>
</body>
</html>
